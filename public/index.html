<!doctype html>
<html>
<head>
    <title>|papers|</title>
    <link rel="stylesheet" href="stylesheet.css">
</head>
<body>
    <div id="titlelogo">
        <h1>|papers|</h1>
    </div>
    <div id="main">


        <div id="herocontainer">
            <img id="heroimage" v-bind:src="heroimage.image">
            <button id="herobutton" type="button" @click="uploadOption">Upload Image</button>
        </div>



        <div v-if="clickedUpload" id="uploadform">
            <div id="formtitle">
                <p id="titletext">Title</p>
                <input id="titleinput"v-model= "formStuff.title" type="text" placeholder="">
            </div>
            <div id="formdescription">
                <p id="descriptiontext">Description</p>
                <input id="descriptioninput" v-model="formStuff.description" type="text" placeholder="">
            </div>
            <div id="formusername">
                <p id="usernametext">Username</p>
                <input id="usernameinput" v-model="formStuff.username" type="text" placeholder="">
            </div>
                <input id="fileupload" type="file" name="file" size="200" v-on:change="chooseFile">
                <button class="formsubmit" type="button" @click="uploadFile">Submit</button>

        </div>

        <div id="imagelayout">
                <div id="imagediv" v-for="image in pagedata">
                    <img id ="singleimages" v-bind:src="image.image" v-on:click="currentlySelected(image.id)">
                    <strong id="imagetext">{{image.title}}</strong>
                </div>
        </div>




        <big-image v-if="selectedImage"
         v-bind:selected-image="selectedImage" v-on:changed="selectedImage=null" v-on:commentsubmit="formStuff"></big-image>


    </div>

    <script id="modal-component" type="x-template">



    <div id="modalback" @click="closeModal">
            <div class="modalwindow" @click="stopPropagation">
                <div @click="closeModal" id="closemodal">X</div>
                <div v-if="currentImage">

                    <div id="modaldiv">
                        <img id="modalimage" v-bind:src="currentImage.image">



                        <div id="modalform">
                            <p>Add a Comment!</p>
                            <input v-model="commentData.comment" type="text" placeholder="Comment">
                            <input v-model="commentData.username" type="text" placeholder="Username">
                            <button type="button" @click="submitComment">Submit</button>
                            <button v-if="comments.length===0" type="button" @click="getComments">Show Comments</button>
                            <div v-if="comments.length>0">
                                <button type="button" @click="comments=[]">Hide Comments</button>
                            </div>


                        </div>




                        <div id="modaltext">
                            <strong id="modaltitle">{{currentImage.title}}</strong>
                            <p id="modaldescription">{{currentImage.description}}</p>
                            <p id ="modaluser">Uploaded by {{currentImage.username}} on {{currentImage.created_at}}</p>
                        </div>



                        <div id="modalcommentscontainer">
                            <div id="modalcomments" v-for="comments in comments">
                                <div id="everycomment">{{comments.comment}}</div>
                                <div id="everyusername">{{comments.username}}</div>

                            </div>

                        </div>



                    </div>

                </div>
            </div>
        </div>
    </script>



    <script src="/js/axios.min.js"></script>
    <script src="/js/vue.js"></script>
    <!-- Swap to a smaller version of vue if you deploy the site -->
    <script src="/js/script.js"></script>

</body>
</html>


<!-- HTML is not case sensitive, swap to kebab casing -->
<!-- props will always be assigned using v-bind -->



<!-- v-models
v-on:change is in methods.
this.forumstuff.file = e.target.files[0]

axios.post inside upload function -->

<!--

uploadtoS3, req, res, next
s3 request
read stream
was successful


fs.unlink(file.path, () => 0);
// to remove file after uploading -->
